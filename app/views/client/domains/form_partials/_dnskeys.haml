#dnskeys
  = f.fields_for :dnskeys do |key_fields|
    .panel.panel-default
      .panel-heading.clearfix
        .pull-left= t('shared.dnskey')
        .pull-right
          = link_to(t('shared.add_another'), '#', class: 'btn btn-primary btn-xs add-dnskey')
          = link_to(t('shared.delete'), '#', class: 'btn btn-danger btn-xs destroy')
      .panel-body
        .errors
          = render 'shared/errors', object: key_fields.object
          - if key_fields.object.errors.any?
            %hr
        .row
          .col-md-4
            .form-group
              = key_fields.label :flags
              = key_fields.text_field :flags, class: 'form-control'
          .col-md-4
            .form-group
              = key_fields.label :protocol
              = key_fields.text_field :protocol, class: 'form-control'
          .col-md-4
            .form-group
              = key_fields.label :alg
              = key_fields.text_field :alg, class: 'form-control'
        .row
          .col-md-12
            = key_fields.label :public_key
            = key_fields.text_field :public_key, class: 'form-control'
:javascript
  $("#dnskeys").nestedAttributes({
    bindAddTo: $(".add-dnskey"),
    afterAdd: function(item) {
      item.find('.errors').html('');
    }
  });
