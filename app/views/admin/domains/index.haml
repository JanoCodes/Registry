= render 'shared/title', name: t(:domains)

.row
  .col-md-12
    = search_form_for [:admin, @q], html: { style: 'margin-bottom: 0;', class: 'js-form' } do |f|
      .row
        .col-md-4
          .form-group
            = f.label :name
            = f.search_field :name_cont, class: 'form-control', placeholder: t(:name)
        .col-md-4
          .form-group
            = f.label t(:registrar)
            = f.select :registrar_id_eq, Registrar.all.map { |x| [x, x.id] }, {}, class: 'form-control selectize', placeholder: t(:choose)
        .col-md-4
          .form-group
            = f.label t(:registrant_ident)
            = f.search_field :registrant_ident_eq, class: 'form-control', placeholder: t(:registrant_ident)
      .row
        .col-md-3
          .form-group
            = f.label t(:valid_to_from)
            = f.search_field :valid_to_gteq, class: 'form-control datepicker', placeholder: t(:valid_to_from), autocomplete: 'off'
        .col-md-3
          .form-group
            = f.label t(:valid_to_until)
            = f.search_field :valid_to_lteq, class: 'form-control datepicker', placeholder: t(:valid_to_until), autocomplete: 'off'
        .col-md-3{style: 'padding-top: 25px;'}
          %button.btn.btn-primary
            &nbsp;
            %span.glyphicon.glyphicon-search
            &nbsp;
          %button.btn.btn-default.js-reset-form
            = t(:clear_fields)
%hr
.row
  .col-md-12
    .table-responsive
      %table.table.table-hover.table-bordered.table-condensed
        %thead
          %tr
            %th{class: 'col-xs-2'}
              = sort_link(@q, 'name')
            %th{class: 'col-xs-2'}
              = sort_link(@q, 'registrant_name', t(:registrant))
            %th{class: 'col-xs-2'}
              = sort_link(@q, 'valid_to', t(:valid_to))
            %th{class: 'col-xs-2'}
              = sort_link(@q, 'registrar_name', t(:registrar))
        %tbody
          - @domains.each do |x|
            %tr
              %td= link_to(x, admin_domain_path(x))
              %td
                - if x.registrant
                  = link_to(x.registrant, [:admin, x.registrant])

              %td= l(x.valid_to, format: :short)
              %td= link_to(x.registrar, admin_registrar_path(x.registrar)) if x.registrar
.row
  .col-md-12
    = paginate @domains
