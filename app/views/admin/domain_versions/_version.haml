- children = HashWithIndifferentAccess.new(version.children)
- nameservers    = children[:nameservers] || []
- tech_contacts  = children[:tech_contacts] || []
- admin_contacts = children[:admin_contacts] || []
- owner_contact  = children[:owner_contact] || []

%td
  %p.nowrap
    = l(domain.updated_at, format: :short)
    = version.event
  %p.text-right
    = version.terminator

%td
  %p
    = "#{domain.period}#{domain.period_unit}"
    = "#{l(domain.valid_from, format: :date)} - #{l(domain.valid_to, format: :date)}"
  %p
    = domain.status

%td
  - owner_contact.each do |oc|
    %p
      = oc[:name]
      = oc[:phone]
      = oc[:email]
    %p
      = oc[:code]

%td
  - admin_contacts.each do |ac|
    %p
      = ac[:name]
      = ac[:phone]
      = ac[:email]
    %p
      = ac[:code]

%td
  - tech_contacts.each do |tc|
    %p
      = tc[:name]
      = tc[:phone]
      = tc[:email]
    %p
      = tc[:code]

%td
  - nameservers.each do |ns|
    %p
      = ns[:hostname]
      %br
      = ns[:ipv4]
      = ns[:ipv6]

%td
  %p
    = domain.registrar.name

-# %td
  -# = version.children.inspect

-# %td{ class: changes.include?(:domain) ? 'edit-highlight' : 'no-highlight' }
  -# - if children[:domain]
    -# %p{:style => "font-size:x-small;"}
      -# = children[:domain][:period]
      -# = children[:domain][:period_unit] if children[:domain][:period]
      -# - if children[:domain][:valid_to] && children[:domain][:valid_from]
        -# = ","
        -# = l(children[:domain][:valid_from], format: :date) + '-' + l(children[:domain][:valid_to], format: :date)
      -# - if children[:domain].try(:[], :registrar_id)
        -# = ","
        -# = Registrar.find(children[:domain][:registrar_id]).try(:name)
      -# - if children[:domain][:status]
        -# = ',' + children[:domain][:status]


-# %td{ class: changes.include?(:owner_contact) ? 'edit-highlight' : 'no-highlight' }
  -# - if children[:owner_contact]
    -# %p{:style => "font-size:x-small;"}
      -# = children[:owner_contact][:name]
      -# = ","
      -# = children[:owner_contact][:phone]
      -# = ","
      -# = children[:owner_contact][:email]
      -# = ","
      -# = children[:owner_contact][:code]

-# %td{ class: changes.include?(:admin_contacts) ? 'edit-highlight' : 'no-highlight' }
  -# - if children[:admin_contacts]
    -# - children[:admin_contacts].each do |ac|
      -# %p{:style => "font-size:x-small;"}
        -# = ac[:name]
        -# = ","
        -# = ac[:phone]
        -# = ","
        -# = ac[:email]
        -# = ","
        -# = ac[:code]

-# %td{ class: changes.include?(:tech_contacts) ? 'edit-highlight' : 'no-highlight' }
  -# - if children[:tech_contacts]
    -# - children[:tech_contacts].each do |tc|
      -# %p{:style => "font-size:x-small;"}
        -# = tc[:name]
        -# = ","
        -# = tc[:phone]
        -# = ","
        -# = tc[:email]
        -# = ","
        -# = tc[:code]

-# %td{ class: changes.include?(:nameservers) ? 'edit-highlight' : 'no-highlight' }
  -# - if children[:nameservers]
    -# - children[:nameservers].each do |ns|
      -# %p{:style => "font-size:x-small;"}
        -# = ns[:hostname]
        -# = ","
        -# = ns[:ipv4] || ns[:ipv6]

-# %td
  -# %p{ :style => 'font-size:x-small;' }
    -# = l(version.created_at, format: :short)
    -# = whodunnit_with_protocol(version.whodunnit)
    -# = version.event
