.row
  .col-sm-6
    %h2.text-center-xs= t('shared.contacts_history')
    = render 'admin/contacts/partials/search'
  .col-sm-6
    %h2.text-right.text-center-xs
      = link_to(t('shared.deleted'), admin_contact_versions_path(deleted: true), class: 'btn btn-primary')
%hr
.row
  .col-md-12
    .table-responsive
      %table.table.table-hover.table-bordered.table-condensed
        %thead
          %tr
            %th{class: 'col-xs-2'}
              = sort_link(@q, 'name', t('shared.name'))
            %th{class: 'col-xs-1'}
              = sort_link(@q, 'code', t('shared.code'))
            %th{class: 'col-xs-1'}
              whodunnit
              = #sort_link(@q, 'ident', t('shared.identity_code'))
            %th{class: 'col-xs-1'}
              event
              = #sort_link(@q, 'email', t('shared.email'))
            %th{class: 'col-xs-2'}
              created_at
            %th{class: 'col-xs-1'}
              = t('shared.action')
        %tbody
          - @contacts.each do |x|
            %tr
              %td= x.name #link_to(x, admin_contact_path(x))
              %td= x.code #link_to(x, admin_contact_path(x))
              %td= x.versions.last.whodunnit if x.versions.last
              %td= x.versions.last.event if x.versions.last
              %td= x.versions.last.created_at if x.versions.last
              %td= link_to(t('shared.history'), admin_contact_version_path(x), class: 'btn btn-primary btn-xs')
.row
  .col-md-12
    = paginate @contacts
